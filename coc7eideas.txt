manager_actor2.lua

Make skills come over without being constrained. Occupations with brackets will come over as a label and sublabel. Those with ____________ will come over and the user can enter detail on the character skill sheet (non-edit mode)

Replace this function
-- function getOccupationSkills(occupationbNode)
--   local vSkills = {};
--     for _,w in pairs(DB.getChildren(occupationbNode, "skills")) do
--       local skill = DB.getValue(w, "skill", "");
--       local sLabel, sSubLabel = string.match(skill, "(.*)%s%((.*)%)")
--       if sLabel ~= nil then
--         skill = sLabel;
--       end

--       if skill and skill ~= "" then
--         local rSkill = EraManager.getSkill(skill);
        
--         local sublabel = DB.getValue(w, "sublabel", "");
--         if sublabel ~= "" then
--           vSkills[skill.." ("..sublabel..")"] = {skill=skill, sublabel=sublabel};
--         else
--           if rSkill and (EraManager.getSublabeling(rSkill) ~= true) then
--             vSkills[skill] = {skill=skill, sublabel=sublabel};
--           end
--         end
--       end
--     end
--   return vSkills;
-- end
With
function getOccupationSkills(occupationbNode)
  local vSkills = {};
  for _,w in pairs(DB.getChildren(occupationbNode, "skills")) do
    local skill = DB.getValue(w, "skill", "");

    -- If the skill text itself has parentheses, e.g. "Science (Biology)",
    -- split it into base + sublabel text.
    local sLabel, sSubLabel = string.match(skill, "^(.-)%s*%((.+)%)$");
    if sLabel ~= nil then
      skill = sLabel;
    end

    if skill and skill ~= "" then
      local rSkill = EraManager.getSkill(skill);

      -- Prefer the explicit sublabel field, but fall back to the part in parentheses
      local sublabel = DB.getValue(w, "sublabel", "");
      if sublabel == "" and sSubLabel ~= nil and sSubLabel ~= "" then
        sublabel = sSubLabel;
      end

      if sublabel ~= "" then
        -- Normal case: specialization is defined, e.g. "Science (Biology)"
        vSkills[skill .. " (" .. sublabel .. ")"] = { skill = skill, sublabel = sublabel };
      else
        -- NEW: even if this is a "requires sublabel" skill, still include
        -- a base row so the character gets the skill and can fill in the
        -- sublabel on their sheet later.
        vSkills[skill] = { skill = skill, sublabel = "" };
      end
    end
  end
  return vSkills;
end

campaign/record_char_skills.xml 

Comment out read only
<button_listitem_checkbox_left name="occupation">
	<tooltip textres="char_tooltip_occupationskill" />
	<invisible/>
	<!-- <readonly/> -->
	<script>
		function onInit()
			self.update();
		end
		function onValueChanged()
			self.update();
		end
		function update()
			local w = window;
			local bOccupationSkill = w.occupation.getValue() == 1;
			if not bOccupationSkill then
				if w.occupationspent.getValue() > 0 then
					local nPersonalInterestSpent = w.personalinterestspent.getValue();
					w.personalinterestspent.setValue(nPersonalInterestSpent+w.occupationspent.getValue());
					w.occupationspent.setValue(0);
				end
			end
			w.occupationspent.setReadOnly(not bOccupationSkill);
		end
	</script>
</button_listitem_checkbox_left>


campaign/scripts/char_skilllist.lua 

Remove read only on occupationspent

local bOccupationSkill = w.occupation.getValue() == 1;
if not bOccupationSkill then
  if w.occupationspent.getValue() > 0 then
    local nSpent = w.spent.getValue();
    w.spent.setValue(nSpent+w.occupationspent.getValue());
    w.occupationspent.setValue(0);
  end
end
    w.occupationspent.setReadOnly(false);
    w.label.setReadOnly(bOccupationSkill and bEditMode);
    w.sublabel.setReadOnly(bOccupationSkill and bEditMode);


and replace function to add skills without constraints

Replace this
-- function addNewInstance(sLabel)
--   local aSkills = EraManager.getSkills(true);
--   local rSkill = aSkills[sLabel];
--   if (rSkill and EraManager.getSublabeling(rSkill)) then
--     local w = createWindow();
--     w.label.setValue(sLabel);
--     w.base.setValue(rSkill.base);
--     w.updateWindow();
--     w.sublabel.setFocus();
--     w.shortcut.setValue("skill", "skill."..EraManager.hashName(sLabel));
--     onListChanged();
--   end
-- end

With
function addNewInstance(sLabel)
  -- Always create a new row, even if EraManager doesn't know the skill
  local w = createWindow();
  if not w then
    return;
  end

  -- Use whatever text was passed in
  w.label.setValue(sLabel);

  -- OPTIONAL: still try to pull a base/shortcut if it *is* a known skill
  local aSkill = EraManager.getSkill(sLabel);
  if aSkill then
    local nBase = aSkill.base or 0;
    w.base.setValue(nBase);
    -- If you want a proper shortcut link:
    w.shortcut.setValue("skill", "skill." .. EraManager.hashName(sLabel));
  end

  w.updateWindow();
  w.sublabel.setFocus();
  onListChanged();
end
